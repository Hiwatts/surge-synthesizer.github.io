<menu id="toc" class="toc"></menu>

<script>
    const toggle = (e: any) => {
        let block = document.getElementById(`${e}-block`);
        let list = document.getElementById("pagecontent")!.getElementsByTagName("div");
        for (const item of list) {
            if (item.id === block!.id) item.style.display = "initial";
            else item.style.display = "none";
        }
    };

    const toc = document.getElementById("toc") as HTMLMenuElement;

    Array.from(document.querySelectorAll("h1")).map((heading) => {
        let li = document.createElement("li");
        let a = document.createElement("a");
        let level = Number(heading.tagName.substring(1));

        a.setAttribute("href", "#" + heading.id);
        a.setAttribute("class", "no-underline");
        a.onclick = () => {
            toggle(heading.id);
        };

        if (heading.textContent) li.innerText = heading.textContent.trim();

        if (level === 1) {
            li.setAttribute("class", "text-lg font-bold");
        }

        if (level === 2) {
            li.setAttribute("style", "padding-left: 1rem; list-style-type: '• ';");
        }

        if (level === 3) li.setAttribute("style", "padding-left: 2rem; list-style-type: '◦ ';");
        if (level === 4) li.setAttribute("style", "padding-left: 3rem; list-style-type: '⁃ ';");
        if (level === 5) li.setAttribute("style", "padding-left: 4rem;  list-style-type: '⁃ '");
        if (level === 6) li.setAttribute("style", "padding-left: 5rem;  list-style-type: '⁃ '");

        a.appendChild(li);

        toc.appendChild(a);
    });
</script>
